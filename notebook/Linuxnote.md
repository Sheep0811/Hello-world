# **shell命令例题与命令**

## 1. 统计一个文本文件 words.txt 中每个单词出现的频率。
    cat words. txt |tr -s ' ' '\n' |sort|uniq -c|sort -r|awk '{print $2,$1}'
* cat ——浏览文件
* tr -s ——替换字符串（空格换为换行）保证了一行一个单词
* sort ——默认ASCII值排序，排序号后还会有重复
* uniq —— 去重，-c再输出重复次数。结果就是 ”4 abc“ abc出现了4次
* sort -r —— 反向排序，也就是从大到小。得到按频率高低的结果
* awk ——格式化输出，规定输出是先字符串再重复次数，所以先$2再$1，中间空格分隔
## 2. wc
  * -c 统计字节数;
  * -l 统计行数;
  * -w 统计字数。 

## 3.查看进程

* grep 查找文件里符合条件的字符串
* ps -aux 查看所有进程信息
* ps -ef | grep kafka ——查看kafka这个进程的进程id
* top 动态实时查看进程的信息
* cat + 地址查看进程status文件

## 4. 查看文件

- cat命令，用于查看文件内容；
- tac命令，从最后一行开始显示；
- nl命令，在显示的时候输出行号；
- more命令，用于一页一页的显示文件内容等。

## 删除进程

- kill -[pid]

## 查看内存使用情况

1. **top : 用于实时显示 process 的动态**

　PID：进程的ID　　

​	USER：进程所有

​    PR：进程的优先级别，越小越优先被执

​    VIRT：进程占用的虚拟内

​    RES：进程占用的物理内

​    SHR：进程使用的共享内

​    S：进程的状态,S表示休眠，R表示正在运行，Z表示僵死状态，N表示该进程优先值为负

​    %CPU：进程占用CPU的使用

​    %MEM：进程使用的物理内存和总内存的百分

​    TIME+：该进程启动后占用的总的CPU时间，即占用CPU使用时间的累加值

​    COMMAND：进程启动命令名称

2. **free：查看系统内存使用情况**

​	total:总计物理内存的大小

​	used:已使用多大

​	free:可用有多少

​	shared:多个进程共享的内存总额

​	buff/cached:磁盘缓存的大小

3. **cat /proc/meminfo:** 查看RAM使用情况最简单的方法是通过/proc/meminfo

​	这个动态更新的虚拟文件实际上是许多其他内存相关工具(如：free / ps / top)等的组合显示。

​	/proc/meminfo列出了所有你想了解的内存的使用情况。

​	进程的内存使用信息也可以通过/proc/<pid>/statm 和 /proc/<pid>/status 来查看。

# linux上进程有5种状态:

1. 运行(正在运行或在运行队列中等待)

2. 中断(休眠中, 受阻, 在等待某个条件的形成或接受到信号)

3. 不可中断(收到信号不唤醒和不可运行, 进程必须等待直到有中断发生)

4. 僵死(进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放)

5. 停止(进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行)

  ps工具标识进程的5种状态码:
  **D 不可中断 uninterruptible sleep (usually IO)**
  **R 运行 runnable (on run queue)**
  **S 中断 sleeping**
  **T 停止 traced or stopped**
  **Z 僵死 a defunct (”zombie”) process**
  注: 其它状态还包括**W(无驻留页), <(高优先级进程), N(低优先级进程), L(内存锁页).**
  使用ps格式输出来查看进程状态:

## 查看磁盘使用情况

**统一磁盘整体情况，包括磁盘大小，已使用，可用**

1. 查看当前目录

```
df -h   //统一每个目录下磁盘的整体情况
```

2. 查看指定目录 *在命令后直接放目录名,比如查看“usr”目录使用情况：*

```
df -h /usr/   统一了指定目录一使用情况，及分配的最大空间
```

**具体查看文件夹的占用情况。**

1. 查看当前目录每个文件夹的情况。

```
du --max-depth=1 -h        最后一行统计整体占用多少磁盘
```

2. 指定目录
   只要在命令后直接根目录名，以目录“/usr”为例

```
du --max-depth=1 -h  /usr/
```

**计算文件夹大小**
为了快算显示，同时也只是想查看目录整体占用大小。可以直接使用du -sh 命令，如果想查看指定目录，直接在命令后根目录即可。
命令：

```
du -sh /usr/
```

**总结**
其中df -h和du -sh使用的比较多，一个统计整体磁盘情况，一个看单独目录点用情况，而命令du --max-depth=1 -h查看了目录下文件夹占用情况，使用比较少，可以用du -sh代替，而且命令较长，当然并不是说它没用。

# linux文件权限
三个数字分别代表了**User（文件所有者）、Group（同组用户）、及Other（其他用户）**三种角色的权限。每个数字都可以转换成三位二进制数，这三位二进制数分别代表了该角色的可读r，可写w，可运行x的权限。

| 数字 | 二进制 | 权限                     | 字母  |
| ---- | ------ | ------------------------ | ----- |
| 7    | 111    | 可读，可写，可运行       | r w x |
| 6    | 110    | 可读，可写，不可运行     | r w - |
| 5    | 101    | 可读，不可写，可运行     | r - x |
| 4    | 100    | 可读，不可写，不可运行   | r - - |
| 0    | 000    | 不可读，不可写，不可运行 | - - - |

所以777就代表所有角色的所有权限都打开，440就是文件所有者和同组用户有读的权限，其他用户 0 权限。

数字组合	权限表示

| 数字组合 | 权限表示          |
| -------- | ----------------- |
| 777      | r w x r w x r w x |
| 440      | r - - r - - - - - |
| 444      | r - - r - - r - - |
| 644      | r w - r - - r - - |
| 666      | r w - r w - r w - |
| 700      | r w x - - - - - - |
| 744      | r w x r - - r - - |
| 755      | r w x r - x r - x |


在Linux中执行：

```
ls -al
```

该命令会以长列表形式列出当前文件夹下的所有文件（包括隐藏文件）。每个文件开头标注的就是文件权限。